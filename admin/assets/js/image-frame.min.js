;(function($){"use strict";var cnhkImageFrame=function(options){this.defaultOptions={url:null,alt:null,mime:['image/jpeg','image/png','image/gif'],notice:null,};this.options=$.extend({},this.defaultOptions,options);this.wpMediaFrame=wp.media.frames.frame=wp.media({title:cnhkImageFrameLocale.selectImage,button:{text:cnhkImageFrameLocale.button,},multiple:false});var that=this;this.wpMediaFrame.on('select',function(){var attachment=that.wpMediaFrame.state().get('selection').first().toJSON();var isValidImage=(-1!=that.options.mime.indexOf(attachment.mime));if(isValidImage){that.options.url.val(attachment.url);that.options.url.trigger('change');if(that.options.alt){that.options.alt.val(attachment.alt);that.options.alt.trigger('change');};if(that.options.notice){that.options.notice.empty();}}else{if(that.options.notice){that.options.notice.text(cnhkImageFrameLocale.invalidFileType);}}});this.wpMediaFrame.open();return this;};$.cnhkImageFrame=function(options){var data=$('#wpwrap').data('cnhkImageFrame');if(undefined===data){$('#wpwrap').data('cnhkImageFrame',new cnhkImageFrame(options));}else{data.options=$.extend({},data.defaultOptions,options);data.wpMediaFrame.open();}};})(jQuery);